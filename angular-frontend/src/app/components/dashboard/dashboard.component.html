<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h4 class="mb-0">
          <i class="bi bi-speedometer2"></i> Theft Detection Dashboard
        </h4>
        <div class="text-muted">
          <i class="bi bi-clock"></i> {{ currentTime | date:'medium' }}
        </div>
      </div>
      <div class="card-body">
        <div class="row g-4">
          <!-- System Status Cards -->
          <div class="col-md-3">
            <div class="card text-center h-100" 
                 [class]="activeSessions.length > 0 ? 'border-success' : 'border-secondary'">
              <div class="card-body">
                <div class="display-4 mb-3" 
                     [class]="activeSessions.length > 0 ? 'text-success' : 'text-secondary'">
                  <i class="bi bi-camera-video"></i>
                </div>
                <h5 class="card-title">Active Sessions</h5>
                <h2 class="text-primary">{{ activeSessions.length }}</h2>
                <p class="card-text">
                  <small class="text-muted">Camera sessions running</small>
                </p>
              </div>
            </div>
          </div>
          
          <div class="col-md-3">
            <div class="card text-center h-100 border-info">
              <div class="card-body">
                <div class="display-4 mb-3 text-info">
                  <i class="bi bi-collection-play"></i>
                </div>
                <h5 class="card-title">Total Videos</h5>
                <h2 class="text-info">{{ totalVideos }}</h2>
                <p class="card-text">
                  <small class="text-muted">Recorded videos</small>
                </p>
              </div>
            </div>
          </div>
          
          <div class="col-md-3">
            <div class="card text-center h-100 border-warning">
              <div class="card-body">
                <div class="display-4 mb-3 text-warning">
                  <i class="bi bi-camera"></i>
                </div>
                <h5 class="card-title">Screenshots</h5>
                <h2 class="text-warning">{{ totalScreenshots }}</h2>
                <p class="card-text">
                  <small class="text-muted">Captured images</small>
                </p>
              </div>
            </div>
          </div>
          
          <div class="col-md-3">
            <div class="card text-center h-100" 
                 [class]="wsConnected ? 'border-success' : 'border-danger'">
              <div class="card-body">
                <div class="display-4 mb-3" 
                     [class]="wsConnected ? 'text-success' : 'text-danger'">
                  <i class="bi" [class]="wsConnected ? 'bi-wifi' : 'bi-wifi-off'"></i>
                </div>
                <h5 class="card-title">Connection</h5>
                <h2 [class]="wsConnected ? 'text-success' : 'text-danger'">
                  {{ wsConnected ? 'Online' : 'Offline' }}
                </h2>
                <p class="card-text">
                  <small class="text-muted">WebSocket status</small>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Quick Actions -->
  <div class="col-12 mt-4">
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0">
          <i class="bi bi-lightning"></i> Quick Actions
        </h5>
      </div>
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-4">
            <a routerLink="/camera" class="btn btn-primary btn-lg w-100">
              <i class="bi bi-camera"></i> Start Camera
            </a>
          </div>
          <div class="col-md-4">
            <a routerLink="/media" class="btn btn-info btn-lg w-100">
              <i class="bi bi-collection-play"></i> View Media
            </a>
          </div>
          <div class="col-md-4">
            <button class="btn btn-success btn-lg w-100" (click)="refreshData()">
              <i class="bi bi-arrow-clockwise"></i> Refresh Data
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Active Sessions List -->
  <div class="col-12 mt-4" *ngIf="activeSessions.length > 0">
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0">
          <i class="bi bi-activity"></i> Active Camera Sessions
        </h5>
      </div>
      <div class="card-body">
        <div class="list-group">
          <div class="list-group-item" *ngFor="let session of activeSessions">
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <h6 class="mb-1">
                  <span class="status-indicator status-connected"></span>
                  {{ session.deviceId }}
                </h6>
                <p class="mb-1">
                  <small class="text-muted">
                    Session ID: {{ session.sessionId.substring(0, 8) }}...
                  </small>
                </p>
                <small class="text-muted">
                  Started: {{ session.startTime | date:'short' }} |
                  IP: {{ session.ipAddress }}
                </small>
              </div>
              <div class="text-end">
                <span class="badge bg-success">Active</span>
                <div class="mt-1">
                  <small class="text-muted">
                    Duration: {{ getSessionDuration(session.startTime) }}
                  </small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- System Information -->
  <div class="col-12 mt-4">
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0">
          <i class="bi bi-info-circle"></i> System Information
        </h5>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6">
            <h6>Server Status</h6>
            <ul class="list-unstyled">
              <li>
                <i class="bi bi-server text-primary"></i>
                Backend API: 
                <span class="badge bg-success ms-2">Connected</span>
              </li>
              <li>
                <i class="bi bi-broadcast text-info"></i>
                WebSocket: 
                <span class="badge ms-2" [class]="wsConnected ? 'bg-success' : 'bg-danger'">
                  {{ wsConnected ? 'Connected' : 'Disconnected' }}
                </span>
              </li>
              <li>
                <i class="bi bi-database text-warning"></i>
                Database: 
                <span class="badge bg-success ms-2">MySQL Ready</span>
              </li>
            </ul>
          </div>
          <div class="col-md-6">
            <h6>Features Available</h6>
            <ul class="list-unstyled">
              <li><i class="bi bi-check-circle text-success"></i> Real-time Camera Streaming</li>
              <li><i class="bi bi-check-circle text-success"></i> Video Recording</li>
              <li><i class="bi bi-check-circle text-success"></i> Screenshot Capture</li>
              <li><i class="bi bi-check-circle text-success"></i> File Storage</li>
              <li><i class="bi bi-check-circle text-success"></i> Session Management</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>